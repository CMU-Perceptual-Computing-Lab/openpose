<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OpenPose: OpenPose Advanced Doc - Deploying/Exporting OpenPose to Other Projects</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="Logo_doxygen_black.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OpenPose
   &#160;<span id="projectnumber">1.7.0</span>
   </div>
   <div id="projectbrief">The first real-time multi-person system to jointly detect human body, hand, facial, and foot keypoints</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md_doc_advanced_deployment.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">OpenPose Advanced Doc - Deploying/Exporting OpenPose to Other Projects </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md151"></a>
Contents</h1>
<ol type="1">
<li><a href="#introduction">Introduction</a></li>
<li><a href="#third-party-libraries">Third-Party Libraries</a></li>
<li><a href="#private-openpose-include-directory">Private OpenPose Include Directory</a></li>
<li><a href="#crash-and-core-dumped-avoidance">Crash and Core Dumped Avoidance</a></li>
<li><a href="#deploying-openpose">Deploying OpenPose</a><ol type="a">
<li><a href="#windows">Windows</a></li>
<li><a href="#cmake-windows-ubuntu-and-mac">CMake (Windows, Ubuntu, and Mac)</a></li>
</ol>
</li>
</ol>
<h2><a class="anchor" id="autotoc_md152"></a>
Introduction</h2>
<p>Starting in OpenPose 1.6.0 (GitHub code in or after October 2019), OpenPose has considerable refactor its code to get rid of OpenCV in its headers. This makes OpenPose 1.6 headers different to previous versions and a bit harder to use. However, it allows OpenPose to be exported to other projects without requiring any third-party libraries (except in some special cases detailed below). The greatest benefit of this change: if your project already uses OpenCV, and you add your own version of OpenPose, the OpenCV version used in OpenPose and the one used in your project will not interfere with each other anymore, even if they are different versions!</p>
<h2><a class="anchor" id="autotoc_md153"></a>
Third-Party Libraries</h2>
<p>While compiling OpenPose from source, the static library files (<code>*.a</code> for Ubuntu, <code>*.lib</code> for Windows, etc.) and <code>include/</code> directories of all the third-party libraries detailed in <a class="el" href="md_doc_installation_0_index.html">doc/installation/0_index.md</a> are required (GFlags, Glog, OpenCV, Caffe, etc.). However, when deploying OpenPose, fewer dependencies are required:</p><ul>
<li>GFLags and Glog are required only if the <code><a class="el" href="flags_8hpp.html">include/openpose/flags.hpp</a></code> file is going to be used (e.g., when intenting to use the command-line interface).</li>
<li>OpenCV can be optionally included if your project already uses it (but make sure to use the same binaries and include directory of OpenCV for both OpenPose and your project or weird runtime crashes will occur!). Including OpenCV does not increase the functionality of OpenPose, but it makes it easier to use by adding some functions that directly take cv::Mat matrices as input (rather than raw pointers). However, it is optional starting in OpenPose 1.6.0.</li>
<li>Caffe or any other 3rd-party libraries are not required.</li>
</ul>
<p>The static library files (<code>*.a</code> for Ubuntu, <code>*.lib</code> for Windows, etc.) and <code>include/</code> directories are the files that must be included in your project settings. However, the runtime library files (<code>*.so</code> for Ubuntu, <code>*.dll</code> for Windows, etc.), which are always required, must simply be placed together with the final executable or in default system paths. I.e., these files are only used during runtime, so they do not require any configuration in your project settings. E.g., for Windows, you can simply copy the content of the auto-generated <code>build/bin/</code> directory into the path where your executable is located.</p>
<h2><a class="anchor" id="autotoc_md154"></a>
Private OpenPose Include Directory</h2>
<p>Inside <code>include/</code>, there are 2 directories: <code>openpose/</code> and <code>openpose_private/</code>. Adding the <code>include_private</code> directory will require to include more libraries (e.g., OpenCV and Eigen). This directory exposes some extra functions used internally, but most of the cases this functionality is not required at all, so the <code>include/</code> directory should only contain the <code>openpose/</code> directory when exported.</p>
<p>Windows-only: In addition, Windows users have to manually add <code>OP_API</code> to all the functions/classes from <code>openpose_private/</code> that he desires to use and then re-compile OpenPose.</p>
<h2><a class="anchor" id="autotoc_md155"></a>
Crash and Core Dumped Avoidance</h2>
<p>If your project already uses OpenCV, and you add your own version of OpenPose, the OpenCV version of OpenPose and the one from your project will not interfere anymore, even if they are different versions. However, you cannot use the OpenCV functions of OpenPose from a different project if that project uses a different versions of OpenCV. Otherwise, very cryptic runtime DLL errors might occur! Make sure you either:</p><ul>
<li>Compile OpenPose and your project with the same version of OpenCV.</li>
<li>Or if that is not possible (new since OpenPose 1.6.0), use the non-OpenCV analog functions of OpenPose to avoid cryptic DLL runtime crashes.</li>
</ul>
<h1><a class="anchor" id="autotoc_md156"></a>
Deploying OpenPose</h1>
<h2><a class="anchor" id="autotoc_md157"></a>
Windows</h2>
<p>First of all, make sure to read all the sections above.</p>
<p>Second, note that the CMake option should also work for Windows. Alternatively, we also show the more Windows-like version in which <code>*.dll</code>, <code>*.lib</code>, and <code>include/</code> files are copied, which might be easier to apply when using the portable binaries.</p>
<h2><a class="anchor" id="autotoc_md158"></a>
CMake (Windows, Ubuntu, and Mac)</h2>
<p>First of all, make sure to read all the sections above.</p>
<p>If you only intend to use the OpenPose demo, you might skip this step. This step is only recommended if you plan to use the OpenPose API from other projects.</p>
<p>To install the OpenPose headers and libraries into the system environment path (e.g., <code>/usr/local/</code> or <code>/usr/</code>), run the following command. </p><div class="fragment"><div class="line">cd build/</div>
<div class="line">sudo make install</div>
</div><!-- fragment --><p>Once the installation is completed, you can use OpenPose in your other project using the <code>find_package</code> cmake command. Below, is a small example <code>CMakeLists.txt</code>. In order to use this script, you also need to copy <code>FindGFlags.cmake</code> and <code>FindGlog.cmake</code> into your <code>&lt;project_root_directory&gt;/cmake/Modules/</code> (create the directory if necessary). </p><div class="fragment"><div class="line">cmake_minimum_required(VERSION 2.8.7)</div>
<div class="line"> </div>
<div class="line">add_definitions(-std=c++11)</div>
<div class="line"> </div>
<div class="line">list(APPEND CMAKE_MODULE_PATH &quot;${CMAKE_CURRENT_SOURCE_DIR}/cmake/Modules&quot;)</div>
<div class="line"> </div>
<div class="line">find_package(GFlags)</div>
<div class="line">find_package(Glog)</div>
<div class="line">find_package(OpenCV)</div>
<div class="line">find_package(OpenPose REQUIRED)</div>
<div class="line"> </div>
<div class="line">include_directories(${OpenPose_INCLUDE_DIRS} ${GFLAGS_INCLUDE_DIR} ${GLOG_INCLUDE_DIR} ${OpenCV_INCLUDE_DIRS})</div>
<div class="line"> </div>
<div class="line">add_executable(example.bin example.cpp)</div>
<div class="line"> </div>
<div class="line">target_link_libraries(example.bin ${OpenPose_LIBS} ${GFLAGS_LIBRARY} ${GLOG_LIBRARY} ${OpenCV_LIBS})</div>
</div><!-- fragment --><p>If Caffe was built with OpenPose, it will automatically find it. Otherwise, you will need to link Caffe again as shown below (otherwise, you might get an error like <code>/usr/bin/ld: cannot find -lcaffe</code>). </p><div class="fragment"><div class="line">link_directories(&lt;path_to_caffe_installation&gt;/caffe/build/install/lib)</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
